<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CST3144 Lessons App</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>

<body>
<div id="app">
    <!-- Header -->
    <header class="header">
        <h1 class="logo" @click="goHome" style="cursor:pointer;">
            <i class="fa-solid fa-graduation-cap"></i> LessonHub
        </h1>
        <input
  v-model="searchTerm"
  class="search"
  placeholder="Search by subject, location, price, or spaces..."
/>


        <div class="controls">
            <input v-model="searchTerm" class="search" placeholder="Search lessons..." />

            <div class="sort-group">
                <div class="custom-select">
                    <select v-model="sortBy">
                        <option value="subject">Subject</option>
                        <option value="location">Location</option>
                        <option value="price">Price</option>
                        <option value="spaces">Spaces</option>
                    </select>
                    <i class="fa-solid fa-angle-down"></i>
                </div>

                <div class="custom-select">
                    <select v-model="sortOrder">
                        <option value="asc">Ascending</option>
                        <option value="desc">Descending</option>
                    </select>
                    <i class="fa-solid fa-angle-down"></i>
                </div>
            </div>

            <button class="cart-btn" @click="showCart = !showCart" :disabled="cart.length === 0">
                <i class="fa-solid fa-cart-shopping"></i>
                <span>Cart</span>
                <span v-if="cart.length" class="cart-badge">{{ cart.length }}</span>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <transition name="fade" mode="out-in">
          <!-- Lesson List -->
          <section v-if="!showCart" key="lessons" class="lesson-section">
            <h2>Available Lessons</h2>
      
            <!-- NEW: lessons found text -->
            <p class="lesson-count">
              {{ sortedAndFilteredLessons.length }} lesson(s) found
            </p>
      
            <!-- NEW: no results message when search has no matches -->
            <p
              v-if="!sortedAndFilteredLessons.length && searchTerm"
              class="no-results"
            >
              No lessons found for "{{ searchTerm }}".
            </p>
      
            <!-- Only show grid when we actually have lessons -->
            <div v-else class="lesson-grid">
              <!-- keep your existing lesson cards exactly as they are -->
              <div
                class="lesson-card"
                v-for="lesson in sortedAndFilteredLessons"
                :key="lesson.id"
              >
                <!-- your existing lesson card content (img, info, button) -->
                <img
                  :src="lesson.image"
                  :alt="lesson.subject + ' lesson icon'"
                  class="lesson-img"
                />
                <div class="lesson-info">
                  <h3>
                    <i :class="lesson.icon"></i>
                    {{ lesson.subject }}
                  </h3>
                  <p>
                    <i class="fa-solid fa-location-dot"></i>
                    {{ lesson.location }}
                  </p>
                  <p>Â£{{ lesson.price }}</p>
                  <p>
                    <i class="fa-solid fa-users"></i>
                    Spaces: {{ lesson.spaces }}
                  </p>
                </div>
                <button
                  @click="addToCart(lesson)"
                  :disabled="lesson.spaces === 0"
                  class="add-btn"
                >
                  <i class="fa-solid fa-cart-plus"></i>
                  {{ lesson.spaces > 0 ? 'Add to Cart' : 'Full' }}
                </button>
              </div>
            </div>
          </section>
      
          <!-- Cart Section (keep your current improved content) -->
          <section v-else key="cart" class="cart-section">
            <!-- keep your existing cart-header, list, checkout-box etc. -->
            <!-- you should already have the version with back button + checkout-box -->
            ...
          </section>
        </transition>
      </main>
      
        <!-- Cart Section -->
<section v-else class="cart-section">
    <!-- Header with back button -->
    <div class="cart-header">
      <button class="back-btn" @click="showCart = false">
        <i class="fa-solid fa-arrow-left"></i> Back to lessons
      </button>
      <h2>Your Cart</h2>
    </div>
  
    <!-- Empty cart message -->
    <p v-if="!cart.length" class="cart-empty">
      Your cart is empty. Go back to the lessons page and add some lessons ðŸŒ±
    </p>
  
    <!-- Cart content when there are items -->
    <div v-else>
      <ul class="cart-list">
        <li v-for="(item, index) in cart" :key="index" class="cart-item">
          <div class="cart-item-info">
            <img
              :src="item.image"
              :alt="item.subject + ' lesson icon'"
              class="cart-thumb"
            />
            <div>
              <h4>{{ item.subject }}</h4>
              <p>
                <i class="fa-solid fa-location-dot"></i>
                {{ item.location }}
              </p>
              <p>
                Â£{{ item.price }} | Spaces left: {{ item.spaces }}
              </p>
            </div>
          </div>
          <button class="remove-btn" @click="removeFromCart(index)">
            <i class="fa-solid fa-trash"></i> Remove
          </button>
        </li>
      </ul>
  
      <!-- Total box -->
      <div class="cart-total-box">
        <h3>
          {{ cart.length }} item(s) | Total: Â£{{ cartTotal.toFixed(2) }}
        </h3>
      </div>
  
      <div class="checkout-box">
        <h3>Checkout</h3>
        <form @submit.prevent="checkout">
          <label>
            Name
            <input
              v-model="name"
              type="text"
              placeholder="Name (letters only)"
              @input="nameError = ''; orderConfirmed = false"
            />
          </label>
          <p v-if="nameError" class="error">{{ nameError }}</p>
    
          <label>
            Phone
            <input
              v-model="phone"
              type="tel"
              placeholder="Phone (numbers only)"
              @input="phoneError = ''; orderConfirmed = false"
            />
          </label>
          <p v-if="phoneError" class="error">{{ phoneError }}</p>
    
          <button
            :disabled="!cart.length || !isFormValid"
            class="checkout-btn"
          >
            <i class="fa-solid fa-paper-plane"></i>
            Submit Order
          </button>
        </form>
    
        <p v-if="orderConfirmed" class="success">
          Order Confirmed Successfully!
        </p>
      </div>
    
<script src="app.js"></script>
</body>
</html>
                                                                                        